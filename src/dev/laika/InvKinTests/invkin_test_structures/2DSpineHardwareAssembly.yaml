# YAML file for the fully assembly of the 2D spine hardware test.

# The ground is actually at 1.5 meters from the origin.
# So translate everything up by, for example, 3 m.
# That 1.5 offset is in METERS, not cm.
# These units are converted from cm into m (SI units.)

substructures:
  mount:
    path: 2DSpineHardwareMount.yaml
    translation: [0, 3, 0]
  vertebra:
    path: 2DSpineHardwareVertebra.yaml
    translation: [0, 3, 0]

# Define the cables.
# HB, HT = horizontal bottom, horizontal top. SB, ST = saddle top, saddle botton.

###########################
bond_groups:

  # Horizontal cables:
  HB:
   mount/vertebra/node_node:
     - [bottom, ybottom]

  HT:
   mount/vertebra/node_node:
     - [top, ytop]

  # Saddle cables:
  SB:
   mount/vertebra/node_node:
     - [midbottom, ybottom]

  ST:
   mount/vertebra/node_node:
     - [midtop, ytop]


# Define the cable parameters
# The spring constants are in N/m, as converted in MATLAB inv kin script.
# TO-DO: PUT ALL IN HERE. The pretension should be from inv kin.

builders:

  # Horizontal cables:
  HT:
    class: tgBasicActuatorInfo
    parameters:
      stiffness: 248 # used mean for first set of IROS data, 244
      damping: 10.0
      pretension: 1.49 # was 1.46 for 244, 1.04 for 174, 0.98 for something else?
      history: 1
      max_tension: 70000.0
      target_velocity: 12.0
      min_actual_length: 0.0
      min_rest_length: 0.0

  HB:
    class: tgBasicActuatorInfo
    parameters:
      stiffness: 941 # used red lattice mean for first IROS data, 434. 515 for later.
      damping: 10.0
      pretension: 14.12 # orig with mean, red, was 6.94. used 7.72 for IROS 2018.
      history: 1
      max_tension: 70000.0
      target_velocity: 12.0
      min_actual_length: 0.0
      min_rest_length: 0.0

  # Saddle cables:
  ST:
    class: tgBasicActuatorInfo
    parameters:
      stiffness: 248 # initial data with 244
      damping: 10.0
      pretension: 12.9 # initial data with 12.69. IROS 2018 with 9.05.
      history: 1
      max_tension: 70000.0
      target_velocity: 12.0
      min_actual_length: 0.0
      min_rest_length: 0.0
      
  SB:
    class: tgBasicActuatorInfo
    parameters:
      stiffness: 248
      damping: 10.0
      pretension: 12.9
      history: 1
      max_tension: 70000.0
      target_velocity: 12.0
      min_actual_length: 0.0
